<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduSphere | JEE/NEET Mock Test Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1d4ed8;
            --secondary: #059669;
            --accent: #d97706;
            --danger: #dc2626;
            --success: #16a34a;
            --dark: #1e293b;
            --light: #ffffff;
            --gray-50: #f8fafc;
            --gray-100: #f1f5f9;
            --gray-200: #e2e8f0;
            --gray-300: #cbd5e1;
            --gray-400: #94a3b8;
            --gray-500: #64748b;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1e293b;
            --gradient: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
            --glass: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
            color: var(--gray-800);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Auth Styles */
        .auth-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        .auth-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2.5rem;
            width: 100%;
            max-width: 400px;
            box-shadow: var(--shadow);
        }

        .logo {
            text-align: center;
            margin-bottom: 2rem;
        }

        .logo-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .logo-text {
            font-size: 2rem;
            font-weight: 800;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--gray-700);
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            background: var(--gray-50);
            border: 1px solid var(--gray-300);
            border-radius: 10px;
            color: var(--gray-800);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--light);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        /* Dashboard Styles */
        .dashboard {
            display: none;
        }

        .header {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .nav-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 1rem 1.5rem;
            background: var(--gray-100);
            border: 1px solid var(--gray-300);
            border-radius: 10px;
            color: var(--gray-700);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .nav-tab.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow);
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--gray-800);
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .test-card {
            background: var(--gray-50);
            border: 1px solid var(--gray-300);
            border-radius: 12px;
            padding: 1.5rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .test-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .test-badge {
            background: var(--accent);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 1rem;
        }

        .hidden {
            display: none !important;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(37, 99, 235, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .metric-card {
            background: var(--gray-50);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            border: 1px solid var(--gray-300);
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        /* Test Creation Styles */
        .test-creation-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .form-row {
            grid-column: 1 / -1;
        }

        .difficulty-selector {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .difficulty-option {
            flex: 1;
            padding: 1rem;
            background: var(--gray-100);
            border: 1px solid var(--gray-300);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .difficulty-option.selected {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .difficulty-option:hover {
            border-color: var(--primary);
        }

        .question-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 1rem;
        }

        .question-item {
            padding: 1rem;
            background: var(--gray-50);
            border: 1px solid var(--gray-300);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .question-text {
            flex: 1;
            margin-right: 1rem;
        }

        .question-difficulty {
            padding: 0.25rem 0.5rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
        }

        .difficulty-easy {
            background: var(--success);
        }

        .difficulty-medium {
            background: var(--accent);
        }

        .difficulty-hard {
            background: var(--danger);
        }

        /* Test Interface Styles */
        .test-interface {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--light);
            z-index: 1000;
            overflow-y: auto;
            padding: 2rem;
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--gray-300);
        }

        .test-timer {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        .question-container {
            margin-bottom: 2rem;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
            color: var(--gray-800);
        }

        .options-container {
            display: grid;
            gap: 1rem;
        }

        .option {
            padding: 1rem;
            background: var(--gray-50);
            border: 1px solid var(--gray-300);
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
        }

        .option:hover {
            border-color: var(--primary);
        }

        .option.selected {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .test-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .question-palette {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .palette-item {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gray-100);
            border: 1px solid var(--gray-300);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .palette-item.answered {
            background: var(--success);
            color: white;
        }

        .palette-item.current {
            border-color: var(--accent);
            box-shadow: 0 0 0 2px var(--accent);
        }

        /* AI Guidance Styles */
        .guidance-result {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: var(--gray-50);
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }

        .guidance-topic {
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .guidance-content {
            line-height: 1.6;
        }

        .guidance-content ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .guidance-content li {
            margin-bottom: 0.5rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .stat-card {
            background: var(--gray-50);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            border: 1px solid var(--gray-300);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        /* Performance Chart */
        .performance-chart {
            height: 300px;
            margin-top: 1.5rem;
            background: var(--gray-50);
            border-radius: 10px;
            padding: 1rem;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            border: 1px solid var(--gray-300);
        }

        .chart-bar {
            width: 40px;
            background: var(--gradient);
            border-radius: 4px 4px 0 0;
            transition: var(--transition);
            position: relative;
        }

        .chart-bar:hover {
            transform: scale(1.05);
        }

        .chart-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Class and Subject Selection */
        .class-subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .class-subject-card {
            background: var(--gray-50);
            border: 2px solid var(--gray-300);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .class-subject-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .class-subject-card.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Solution Section */
        .solution-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--gray-50);
            border-radius: 10px;
            border-left: 4px solid var(--success);
        }

        .solution-title {
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--success);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .test-creation-form {
                grid-template-columns: 1fr;
            }

            .question-palette {
                grid-template-columns: repeat(5, 1fr);
            }

            .difficulty-selector {
                flex-direction: column;
            }

            .class-subject-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Auth Section -->
    <div class="auth-container" id="authContainer">
        <div class="auth-card">
            <!-- Login Form -->
            <div id="loginSection">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="logo-text">EduSphere</div>
                    <p style="opacity: 0.8; margin-top: 0.5rem;">JEE/NEET Mock Test Platform</p>
                </div>
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input type="text" class="form-input" id="username" placeholder="Enter your username" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="password" placeholder="Enter your password" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Role</label>
                        <select class="form-input" id="role">
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" id="loginBtn" style="width: 100%;">
                        <span>Sign In</span>
                    </button>
                </form>
                <div style="text-align: center; margin-top: 1.5rem; color: var(--gray-600);">
                    Don't have an account? <a href="#" style="color: var(--primary); text-decoration: none; font-weight: 600;" onclick="showRegister()">Sign up</a>
                </div>
            </div>

            <!-- Register Form -->
            <div id="registerSection" class="hidden">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="logo-text">Create Account</div>
                </div>
                <form id="registerForm">
                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input type="text" class="form-input" id="regUsername" placeholder="Choose a username" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="regPassword" placeholder="Create a password" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Role</label>
                        <select class="form-input" id="regRole">
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" id="registerBtn" style="width: 100%;">
                        <span>Create Account</span>
                    </button>
                </form>
                <div style="text-align: center; margin-top: 1.5rem; color: var(--gray-600);">
                    Already have an account? <a href="#" style="color: var(--primary); text-decoration: none; font-weight: 600;" onclick="showLogin()">Sign in</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="container">
        <div class="dashboard" id="dashboard">
            <!-- Header -->
            <div class="header">
                <div class="logo" style="text-align: left; margin: 0;">
                    <div class="logo-text">EduSphere</div>
                </div>
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div>
                        <div id="userName">User</div>
                        <div id="userRole" style="opacity: 0.7; font-size: 0.9rem;">Role</div>
                    </div>
                    <button class="btn btn-secondary" onclick="logout()" style="width: auto; padding: 0.5rem 1rem;">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>

            <!-- Navigation -->
            <div class="nav-tabs">
                <div class="nav-tab active" onclick="showSection('tests')">
                    <i class="fas fa-file-alt"></i> Mock Tests
                </div>
                <div class="nav-tab" onclick="showSection('createTest')">
                    <i class="fas fa-plus-circle"></i> Create Test
                </div>
                <div class="nav-tab" onclick="showSection('performance')">
                    <i class="fas fa-chart-line"></i> Performance
                </div>
                <div class="nav-tab" onclick="showSection('guidance')">
                    <i class="fas fa-robot"></i> AI Guidance
                </div>
                <div class="nav-tab hidden" id="adminTab" onclick="showSection('admin')">
                    <i class="fas fa-cogs"></i> Admin
                </div>
            </div>

            <!-- Content Sections -->
            <div class="content-section active" id="testsSection">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 class="card-title">Available Mock Tests</h2>
                        <button class="btn btn-secondary" onclick="refreshTests()" style="width: auto;">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                    <div class="test-grid" id="testsGrid">
                        <!-- Test cards will be populated here -->
                    </div>
                </div>
            </div>

            <div class="content-section" id="createTestSection">
                <div class="card">
                    <h2 class="card-title">Create Custom Test</h2>
                    <div class="test-creation-form">
                        <div class="form-group">
                            <label class="form-label">Class</label>
                            <select class="form-input" id="testClass">
                                <option value="9">Class 9</option>
                                <option value="10">Class 10</option>
                                <option value="11">Class 11</option>
                                <option value="12">Class 12</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Subject</label>
                            <select class="form-input" id="testSubject">
                                <option value="physics">Physics</option>
                                <option value="chemistry">Chemistry</option>
                                <option value="mathematics">Mathematics</option>
                                <option value="biology">Biology</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Chapter</label>
                            <input type="text" class="form-input" id="testChapter" placeholder="Enter chapter name">
                        </div>
                        <div class="form-group form-row">
                            <label class="form-label">Test Type</label>
                            <div class="difficulty-selector">
                                <div class="difficulty-option selected" data-level="auto" onclick="selectTestType('auto')">
                                    Auto Generate (Difficulty)
                                </div>
                                <div class="difficulty-option" data-level="manual" onclick="selectTestType('manual')">
                                    Manual Selection
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="difficultySection">
                            <label class="form-label">Difficulty Level</label>
                            <div class="difficulty-selector">
                                <div class="difficulty-option selected" data-level="mixed" onclick="selectDifficulty('mixed')">
                                    Mixed
                                </div>
                                <div class="difficulty-option" data-level="easy" onclick="selectDifficulty('easy')">
                                    Easy
                                </div>
                                <div class="difficulty-option" data-level="medium" onclick="selectDifficulty('medium')">
                                    Medium
                                </div>
                                <div class="difficulty-option" data-level="hard" onclick="selectDifficulty('hard')">
                                    Hard
                                </div>
                            </div>
                        </div>
                        <div class="form-group hidden" id="manualSection">
                            <label class="form-label">Select Questions</label>
                            <div class="question-list" id="availableQuestions">
                                <!-- Available questions will be listed here -->
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Number of Questions</label>
                            <input type="number" class="form-input" id="questionCount" min="1" max="50" value="10">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Duration (minutes)</label>
                            <input type="number" class="form-input" id="testDuration" min="5" max="180" value="30">
                        </div>
                        <div class="form-group form-row">
                            <button class="btn btn-primary" onclick="generateCustomTest()" style="width: 100%;">
                                <i class="fas fa-magic"></i> Generate Test
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="content-section" id="performanceSection">
                <div class="card">
                    <h2 class="card-title">Your Performance</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="totalTests">0</div>
                            <div class="stat-label">Tests Taken</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="avgScore">0%</div>
                            <div class="stat-label">Average Score</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="bestScore">0%</div>
                            <div class="stat-label">Best Score</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalTime">0h</div>
                            <div class="stat-label">Time Spent</div>
                        </div>
                    </div>
                    <div class="performance-chart" id="performanceChart">
                        <!-- Performance chart will be rendered here -->
                    </div>
                </div>
            </div>

            <div class="content-section" id="guidanceSection">
                <div class="card">
                    <h2 class="card-title">AI Learning Guidance</h2>
                    <div class="form-group">
                        <input type="text" class="form-input" id="chapterInput" placeholder="Enter chapter/topic (e.g., Organic Chemistry, Calculus)">
                        <button class="btn btn-primary" onclick="getAIGuidance()" style="margin-top: 1rem; width: 100%;">
                            <i class="fas fa-magic"></i> Get AI Guidance
                        </button>
                    </div>
                    <div id="guidanceResult"></div>
                </div>
            </div>

            <div class="content-section" id="adminSection">
                <div class="card">
                    <h2 class="card-title">Admin Dashboard</h2>
                    <div id="adminContent">
                        <div class="form-group">
                            <button class="btn btn-primary" onclick="showQuestionManagement()">
                                <i class="fas fa-database"></i> Manage Question Bank
                            </button>
                            <button class="btn btn-secondary" onclick="showTestManagement()" style="margin-left: 1rem;">
                                <i class="fas fa-file-alt"></i> Manage Tests
                            </button>
                        </div>
                        <div id="questionManagement" class="hidden">
                            <h3 style="margin-bottom: 1rem;">Question Bank Management</h3>
                            <div class="test-creation-form">
                                <div class="form-group">
                                    <label class="form-label">Class</label>
                                    <select class="form-input" id="questionClass">
                                        <option value="9">Class 9</option>
                                        <option value="10">Class 10</option>
                                        <option value="11">Class 11</option>
                                        <option value="12">Class 12</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Subject</label>
                                    <select class="form-input" id="questionSubject">
                                        <option value="physics">Physics</option>
                                        <option value="chemistry">Chemistry</option>
                                        <option value="mathematics">Mathematics</option>
                                        <option value="biology">Biology</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Chapter</label>
                                    <input type="text" class="form-input" id="questionChapter" placeholder="Enter chapter name">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Difficulty</label>
                                    <select class="form-input" id="questionDifficulty">
                                        <option value="easy">Easy</option>
                                        <option value="medium">Medium</option>
                                        <option value="hard">Hard</option>
                                    </select>
                                </div>
                                <div class="form-group form-row">
                                    <label class="form-label">Question Text</label>
                                    <textarea class="form-input" id="questionText" rows="3" placeholder="Enter the question text"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Option A</label>
                                    <input type="text" class="form-input" id="optionA" placeholder="Option A">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Option B</label>
                                    <input type="text" class="form-input" id="optionB" placeholder="Option B">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Option C</label>
                                    <input type="text" class="form-input" id="optionC" placeholder="Option C">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Option D</label>
                                    <input type="text" class="form-input" id="optionD" placeholder="Option D">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Correct Answer</label>
                                    <select class="form-input" id="correctAnswer">
                                        <option value="A">A</option>
                                        <option value="B">B</option>
                                        <option value="C">C</option>
                                        <option value="D">D</option>
                                    </select>
                                </div>
                                <div class="form-group form-row">
                                    <label class="form-label">Solution/Explanation</label>
                                    <textarea class="form-input" id="questionSolution" rows="3" placeholder="Enter detailed solution and explanation"></textarea>
                                </div>
                                <div class="form-group form-row">
                                    <button class="btn btn-primary" onclick="addQuestion()" style="width: 100%;">
                                        <i class="fas fa-plus"></i> Add Question
                                    </button>
                                </div>
                            </div>
                            <div class="question-list" id="questionList">
                                <!-- Questions will be listed here -->
                            </div>
                        </div>
                        <div id="testManagement" class="hidden">
                            <h3 style="margin-bottom: 1rem;">Test Management</h3>
                            <div id="adminTestsList">
                                <!-- Admin tests will be listed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Test Interface -->
    <div class="test-interface hidden" id="testInterface">
        <div class="container">
            <div class="test-header">
                <h2 id="testTitle">Mock Test</h2>
                <div class="test-timer" id="testTimer">30:00</div>
            </div>
            
            <div class="question-container">
                <div class="question-text" id="currentQuestionText">Question text will appear here</div>
                <div class="options-container" id="optionsContainer">
                    <!-- Options will be populated here -->
                </div>
                <div class="solution-section hidden" id="solutionSection">
                    <div class="solution-title">Solution</div>
                    <div id="solutionText"></div>
                </div>
            </div>
            
            <div class="test-navigation">
                <button class="btn btn-secondary" id="prevQuestion" onclick="previousQuestion()">
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <div>
                    <span id="currentQuestionNumber">1</span> of <span id="totalQuestions">10</span>
                </div>
                <button class="btn btn-primary" id="nextQuestion" onclick="nextQuestion()">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            
            <div class="question-palette" id="questionPalette">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn btn-primary" onclick="submitTest()" style="width: auto; padding: 1rem 2rem;">
                    <i class="fas fa-paper-plane"></i> Submit Test
                </button>
            </div>
        </div>
    </div>

    <script>
        // Enhanced question bank with solutions
        const questionBank = {
            physics: {
                "9": {
                    "Motion": {
                        easy: [
                            {
                                text: "What is the SI unit of speed?",
                                optionA: "m/s",
                                optionB: "km/h",
                                optionC: "m/s²",
                                optionD: "km/s",
                                correctAnswer: "A",
                                solution: "Speed is defined as distance traveled per unit time. The SI unit of distance is meter (m) and time is second (s), so the SI unit of speed is meter per second (m/s)."
                            },
                            {
                                text: "Which of the following is a vector quantity?",
                                optionA: "Speed",
                                optionB: "Distance",
                                optionC: "Velocity",
                                optionD: "Time",
                                correctAnswer: "C",
                                solution: "Velocity is a vector quantity because it has both magnitude and direction. Speed, distance, and time are scalar quantities as they have only magnitude."
                            }
                        ],
                        medium: [
                            {
                                text: "A car accelerates from 20 m/s to 40 m/s in 5 seconds. What is its acceleration?",
                                optionA: "2 m/s²",
                                optionB: "4 m/s²",
                                optionC: "6 m/s²",
                                optionD: "8 m/s²",
                                correctAnswer: "B",
                                solution: "Acceleration = (Final velocity - Initial velocity) / Time = (40 - 20) / 5 = 20 / 5 = 4 m/s²"
                            }
                        ],
                        hard: [
                            {
                                text: "A ball is thrown vertically upwards with a velocity of 49 m/s. Calculate the maximum height reached by the ball. (g = 9.8 m/s²)",
                                optionA: "122.5 m",
                                optionB: "245 m",
                                optionC: "49 m",
                                optionD: "98 m",
                                correctAnswer: "A",
                                solution: "Using the formula: h = u²/(2g) = (49)²/(2×9.8) = 2401/19.6 = 122.5 m"
                            }
                        ]
                    },
                    "Force and Laws of Motion": {
                        easy: [
                            {
                                text: "Which law of motion is also called the law of inertia?",
                                optionA: "First law",
                                optionB: "Second law",
                                optionC: "Third law",
                                optionD: "Law of gravitation",
                                correctAnswer: "A",
                                solution: "Newton's first law of motion is also called the law of inertia. It states that an object at rest stays at rest and an object in motion stays in motion with the same speed and in the same direction unless acted upon by an unbalanced force."
                            }
                        ]
                    }
                },
                "11": {
                    "Kinematics": {
                        easy: [
                            {
                                text: "The displacement of a particle is given by x = 3t² + 2t + 1. What is its acceleration?",
                                optionA: "3 m/s²",
                                optionB: "6 m/s²",
                                optionC: "2 m/s²",
                                optionD: "0 m/s²",
                                correctAnswer: "B",
                                solution: "Velocity v = dx/dt = 6t + 2, Acceleration a = dv/dt = 6 m/s²"
                            }
                        ]
                    }
                }
            },
            chemistry: {
                "9": {
                    "Atoms and Molecules": {
                        easy: [
                            {
                                text: "What is the atomicity of oxygen molecule?",
                                optionA: "1",
                                optionB: "2",
                                optionC: "3",
                                optionD: "4",
                                correctAnswer: "B",
                                solution: "Oxygen molecule (O₂) consists of two oxygen atoms, so its atomicity is 2."
                            }
                        ]
                    }
                },
                "11": {
                    "Organic Chemistry": {
                        medium: [
                            {
                                text: "Which of the following is an example of electrophilic substitution reaction?",
                                optionA: "Nitration of benzene",
                                optionB: "Addition of HBr to alkene",
                                optionC: "Hydrolysis of ester",
                                optionD: "Combustion of methane",
                                correctAnswer: "A",
                                solution: "Nitration of benzene is a classic example of electrophilic aromatic substitution where the electrophile (NO₂⁺) attacks the benzene ring."
                            }
                        ]
                    }
                }
            },
            mathematics: {
                "9": {
                    "Algebra": {
                        easy: [
                            {
                                text: "What is the value of x in the equation 2x + 5 = 15?",
                                optionA: "5",
                                optionB: "10",
                                optionC: "7.5",
                                optionD: "2.5",
                                correctAnswer: "A",
                                solution: "2x + 5 = 15 ⇒ 2x = 15 - 5 ⇒ 2x = 10 ⇒ x = 5"
                            }
                        ]
                    }
                }
            },
            biology: {
                "9": {
                    "Cell Biology": {
                        easy: [
                            {
                                text: "Which organelle is called the powerhouse of the cell?",
                                optionA: "Nucleus",
                                optionB: "Mitochondria",
                                optionC: "Ribosome",
                                optionD: "Golgi apparatus",
                                correctAnswer: "B",
                                solution: "Mitochondria are called the powerhouse of the cell because they produce ATP (adenosine triphosphate) through cellular respiration, which provides energy for various cellular activities."
                            }
                        ]
                    }
                }
            }
        };

        // Application state
        let currentUser = null;
        let currentTest = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let testTimer = null;
        let timeRemaining = 0;
        let testType = 'auto';
        let selectedDifficulty = 'mixed';

        // DOM Elements
        const authContainer = document.getElementById('authContainer');
        const dashboard = document.getElementById('dashboard');
        const loginSection = document.getElementById('loginSection');
        const registerSection = document.getElementById('registerSection');
        const testsGrid = document.getElementById('testsGrid');
        const adminTab = document.getElementById('adminTab');
        const testInterface = document.getElementById('testInterface');
        const availableQuestions = document.getElementById('availableQuestions');
        const difficultySection = document.getElementById('difficultySection');
        const manualSection = document.getElementById('manualSection');

        // Initialize the application
        function init() {
            // Check if user is already logged in
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showDashboard();
            }

            // Load sample tests
            loadSampleTests();
        }

        // Auth functions
        function showLogin() {
            loginSection.classList.remove('hidden');
            registerSection.classList.add('hidden');
        }

        function showRegister() {
            loginSection.classList.add('hidden');
            registerSection.classList.remove('hidden');
        }

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const role = document.getElementById('role').value;

            // Simple authentication (in real app, this would be server-side)
            if (username && password) {
                currentUser = { username, role };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showDashboard();
            }
        });

        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('regUsername').value;
            const password = document.getElementById('regPassword').value;
            const role = document.getElementById('regRole').value;

            // Simple registration (in real app, this would be server-side)
            if (username && password) {
                currentUser = { username, role };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showDashboard();
            }
        });

        function showDashboard() {
            authContainer.style.display = 'none';
            dashboard.style.display = 'block';
            
            // Update user info
            document.getElementById('userName').textContent = currentUser.username;
            document.getElementById('userRole').textContent = currentUser.role.charAt(0).toUpperCase() + currentUser.role.slice(1);
            document.getElementById('userAvatar').textContent = currentUser.username.charAt(0).toUpperCase();
            
            // Show admin tab only for admin users
            if (currentUser.role === 'admin') {
                adminTab.classList.remove('hidden');
            } else {
                adminTab.classList.add('hidden');
            }
            
            // Load user data
            loadUserData();
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            authContainer.style.display = 'flex';
            dashboard.style.display = 'none';
            showLogin();
        }

        // Section navigation
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName + 'Section').classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Load section-specific data
            if (sectionName === 'tests') {
                loadTests();
            } else if (sectionName === 'performance') {
                loadPerformanceData();
            } else if (sectionName === 'admin') {
                loadAdminData();
            }
        }

        // Test functions
        function loadSampleTests() {
            const sampleTests = [
                {
                    id: 1,
                    title: "Class 9 Physics - Motion",
                    subject: "Physics",
                    class: "9",
                    chapter: "Motion",
                    difficulty: "mixed",
                    duration: 30,
                    questionCount: 10
                },
                {
                    id: 2,
                    title: "Class 11 Chemistry - Organic Chemistry",
                    subject: "Chemistry",
                    class: "11",
                    chapter: "Organic Chemistry",
                    difficulty: "medium",
                    duration: 45,
                    questionCount: 15
                },
                {
                    id: 3,
                    title: "Class 9 Mathematics - Algebra",
                    subject: "Mathematics",
                    class: "9",
                    chapter: "Algebra",
                    difficulty: "easy",
                    duration: 25,
                    questionCount: 8
                },
                {
                    id: 4,
                    title: "Class 9 Biology - Cell Biology",
                    subject: "Biology",
                    class: "9",
                    chapter: "Cell Biology",
                    difficulty: "mixed",
                    duration: 20,
                    questionCount: 6
                }
            ];
            
            localStorage.setItem('sampleTests', JSON.stringify(sampleTests));
        }

        function loadTests() {
            const tests = JSON.parse(localStorage.getItem('sampleTests')) || [];
            testsGrid.innerHTML = '';
            
            tests.forEach(test => {
                const testCard = document.createElement('div');
                testCard.className = 'test-card';
                testCard.innerHTML = `
                    <div class="test-badge">${test.subject}</div>
                    <h3>${test.title}</h3>
                    <p>Class: ${test.class}</p>
                    <p>Chapter: ${test.chapter}</p>
                    <p>Difficulty: ${test.difficulty}</p>
                    <p>Duration: ${test.duration} min</p>
                    <p>Questions: ${test.questionCount}</p>
                    <button class="btn btn-primary" onclick="startTest(${test.id})" style="margin-top: 1rem; width: 100%;">
                        Start Test
                    </button>
                `;
                testsGrid.appendChild(testCard);
            });
        }

        function refreshTests() {
            loadTests();
        }

        // Test creation functions
        function selectTestType(type) {
            testType = type;
            document.querySelectorAll('[data-level]').forEach(el => {
                el.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            if (type === 'auto') {
                difficultySection.classList.remove('hidden');
                manualSection.classList.add('hidden');
            } else {
                difficultySection.classList.add('hidden');
                manualSection.classList.remove('hidden');
                loadAvailableQuestions();
            }
        }

        function selectDifficulty(level) {
            selectedDifficulty = level;
            document.querySelectorAll('[data-level]').forEach(el => {
                el.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        function loadAvailableQuestions() {
            const subject = document.getElementById('testSubject').value;
            const classLevel = document.getElementById('testClass').value;
            const chapter = document.getElementById('testChapter').value;
            
            availableQuestions.innerHTML = '';
            
            if (questionBank[subject] && questionBank[subject][classLevel] && questionBank[subject][classLevel][chapter]) {
                const chapterQuestions = questionBank[subject][classLevel][chapter];
                
                Object.keys(chapterQuestions).forEach(difficulty => {
                    chapterQuestions[difficulty].forEach((question, index) => {
                        const questionItem = document.createElement('div');
                        questionItem.className = 'question-item';
                        questionItem.innerHTML = `
                            <div class="question-text">${question.text}</div>
                            <div class="question-difficulty difficulty-${difficulty}">${difficulty}</div>
                            <input type="checkbox" onchange="toggleQuestionSelection('${subject}', ${classLevel}, '${chapter}', '${difficulty}', ${index})">
                        `;
                        availableQuestions.appendChild(questionItem);
                    });
                });
            } else {
                availableQuestions.innerHTML = '<p>No questions available for the selected criteria.</p>';
            }
        }

        function toggleQuestionSelection(subject, classLevel, chapter, difficulty, index) {
            // Implementation for manual question selection
            console.log('Toggling question:', subject, classLevel, chapter, difficulty, index);
        }

        function generateCustomTest() {
            const subject = document.getElementById('testSubject').value;
            const classLevel = document.getElementById('testClass').value;
            const chapter = document.getElementById('testChapter').value;
            const questionCount = parseInt(document.getElementById('questionCount').value);
            const duration = parseInt(document.getElementById('testDuration').value);
            
            let questions = [];
            
            if (testType === 'auto') {
                // Auto-generate based on difficulty
                if (questionBank[subject] && questionBank[subject][classLevel] && questionBank[subject][classLevel][chapter]) {
                    const chapterQuestions = questionBank[subject][classLevel][chapter];
                    
                    if (selectedDifficulty === 'mixed') {
                        // Mix questions from all difficulty levels
                        Object.keys(chapterQuestions).forEach(difficulty => {
                            questions = questions.concat(chapterQuestions[difficulty]);
                        });
                    } else {
                        questions = chapterQuestions[selectedDifficulty] || [];
                    }
                    
                    // Limit to requested number of questions
                    questions = questions.slice(0, questionCount);
                }
            } else {
                // Manual selection (simplified - in real app, track selected questions)
                if (questionBank[subject] && questionBank[subject][classLevel] && questionBank[subject][classLevel][chapter]) {
                    const chapterQuestions = questionBank[subject][classLevel][chapter];
                    Object.keys(chapterQuestions).forEach(difficulty => {
                        questions = questions.concat(chapterQuestions[difficulty]);
                    });
                    questions = questions.slice(0, questionCount);
                }
            }
            
            if (questions.length > 0) {
                const test = {
                    id: Date.now(),
                    title: `Custom Test - ${subject} Class ${classLevel} - ${chapter}`,
                    subject: subject,
                    class: classLevel,
                    chapter: chapter,
                    difficulty: selectedDifficulty,
                    duration: duration,
                    questions: questions
                };
                
                startCustomTest(test);
            } else {
                alert('No questions available for the selected criteria. Please try different options.');
            }
        }

        function startTest(testId) {
            const tests = JSON.parse(localStorage.getItem('sampleTests')) || [];
            const test = tests.find(t => t.id === testId);
            
            if (test) {
                // For sample tests, generate questions from question bank
                const questions = generateQuestionsForTest(test);
                test.questions = questions;
                startCustomTest(test);
            }
        }

        function generateQuestionsForTest(test) {
            let questions = [];
            
            if (questionBank[test.subject] && questionBank[test.subject][test.class] && questionBank[test.subject][test.class][test.chapter]) {
                const chapterQuestions = questionBank[test.subject][test.class][test.chapter];
                
                if (test.difficulty === 'mixed') {
                    Object.keys(chapterQuestions).forEach(difficulty => {
                        questions = questions.concat(chapterQuestions[difficulty]);
                    });
                } else {
                    questions = chapterQuestions[test.difficulty] || [];
                }
                
                // Limit to requested number of questions
                questions = questions.slice(0, test.questionCount);
            }
            
            return questions;
        }

        function startCustomTest(test) {
            currentTest = test;
            currentQuestionIndex = 0;
            userAnswers = new Array(test.questions.length).fill(null);
            timeRemaining = test.duration * 60; // Convert to seconds
            
            // Show test interface
            dashboard.style.display = 'none';
            testInterface.classList.remove('hidden');
            
            // Initialize test
            displayQuestion();
            updateQuestionPalette();
            startTimer();
        }

        function displayQuestion() {
            const question = currentTest.questions[currentQuestionIndex];
            document.getElementById('currentQuestionText').textContent = question.text;
            document.getElementById('currentQuestionNumber').textContent = currentQuestionIndex + 1;
            document.getElementById('totalQuestions').textContent = currentTest.questions.length;
            document.getElementById('testTitle').textContent = currentTest.title;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            const options = [
                { letter: 'A', text: question.optionA },
                { letter: 'B', text: question.optionB },
                { letter: 'C', text: question.optionC },
                { letter: 'D', text: question.optionD }
            ];
            
            options.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                if (userAnswers[currentQuestionIndex] === option.letter) {
                    optionElement.classList.add('selected');
                }
                optionElement.innerHTML = `
                    <strong>${option.letter}.</strong> ${option.text}
                `;
                optionElement.onclick = () => selectOption(option.letter);
                optionsContainer.appendChild(optionElement);
            });
            
            // Update navigation buttons
            document.getElementById('prevQuestion').disabled = currentQuestionIndex === 0;
            document.getElementById('nextQuestion').disabled = currentQuestionIndex === currentTest.questions.length - 1;
            
            // Hide solution initially
            document.getElementById('solutionSection').classList.add('hidden');
        }

        function selectOption(option) {
            userAnswers[currentQuestionIndex] = option;
            displayQuestion(); // Refresh to show selection
            updateQuestionPalette();
        }

        function updateQuestionPalette() {
            const palette = document.getElementById('questionPalette');
            palette.innerHTML = '';
            
            for (let i = 0; i < currentTest.questions.length; i++) {
                const paletteItem = document.createElement('div');
                paletteItem.className = 'palette-item';
                if (userAnswers[i] !== null) {
                    paletteItem.classList.add('answered');
                }
                if (i === currentQuestionIndex) {
                    paletteItem.classList.add('current');
                }
                paletteItem.textContent = i + 1;
                paletteItem.onclick = () => goToQuestion(i);
                palette.appendChild(paletteItem);
            }
        }

        function goToQuestion(index) {
            currentQuestionIndex = index;
            displayQuestion();
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentTest.questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            }
        }

        function startTimer() {
            updateTimerDisplay();
            testTimer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    submitTest();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('testTimer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function submitTest() {
            clearInterval(testTimer);
            
            // Calculate score
            let score = 0;
            currentTest.questions.forEach((question, index) => {
                if (userAnswers[index] === question.correctAnswer) {
                    score++;
                }
            });
            
            const percentage = (score / currentTest.questions.length * 100).toFixed(1);
            
            // Save test result
            const testResult = {
                testId: currentTest.id,
                testTitle: currentTest.title,
                score: score,
                totalQuestions: currentTest.questions.length,
                percentage: percentage,
                timestamp: new Date().toISOString(),
                answers: userAnswers
            };
            
            saveTestResult(testResult);
            
            // Show results
            alert(`Test submitted!\nYour score: ${score}/${currentTest.questions.length} (${percentage}%)`);
            
            // Return to dashboard
            testInterface.classList.add('hidden');
            dashboard.style.display = 'block';
            showSection('performance');
        }

        function saveTestResult(result) {
            let userResults = JSON.parse(localStorage.getItem(`testResults_${currentUser.username}`)) || [];
            userResults.push(result);
            localStorage.setItem(`testResults_${currentUser.username}`, JSON.stringify(userResults));
        }

        // Performance functions
        function loadPerformanceData() {
            const userResults = JSON.parse(localStorage.getItem(`testResults_${currentUser.username}`)) || [];
            
            document.getElementById('totalTests').textContent = userResults.length;
            
            if (userResults.length > 0) {
                const totalScore = userResults.reduce((sum, result) => sum + parseFloat(result.percentage), 0);
                const avgScore = totalScore / userResults.length;
                const bestScore = Math.max(...userResults.map(result => parseFloat(result.percentage)));
                
                document.getElementById('avgScore').textContent = avgScore.toFixed(1) + '%';
                document.getElementById('bestScore').textContent = bestScore.toFixed(1) + '%';
                
                // Calculate total time (simplified)
                const totalTime = userResults.length * 30; // Assuming 30 min per test on average
                document.getElementById('totalTime').textContent = Math.floor(totalTime / 60) + 'h ' + (totalTime % 60) + 'm';
                
                // Render performance chart
                renderPerformanceChart(userResults);
            } else {
                document.getElementById('avgScore').textContent = '0%';
                document.getElementById('bestScore').textContent = '0%';
                document.getElementById('totalTime').textContent = '0h';
                document.getElementById('performanceChart').innerHTML = '<p>No test data available. Take some tests to see your performance.</p>';
            }
        }

        function renderPerformanceChart(results) {
            const chart = document.getElementById('performanceChart');
            chart.innerHTML = '';
            
            // Simple bar chart for last 5 tests
            const recentResults = results.slice(-5);
            
            recentResults.forEach((result, index) => {
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.height = `${result.percentage}%`;
                bar.innerHTML = `<div class="chart-label">Test ${index + 1}</div>`;
                chart.appendChild(bar);
            });
        }

        // AI Guidance functions
        function getAIGuidance() {
            const topic = document.getElementById('chapterInput').value;
            if (!topic) {
                alert('Please enter a topic or chapter name.');
                return;
            }
            
            const guidanceResult = document.getElementById('guidanceResult');
            guidanceResult.innerHTML = '<div class="loading"></div> Analyzing topic...';
            
            // Simulate AI processing
            setTimeout(() => {
                const guidance = generateAIGuidance(topic);
                guidanceResult.innerHTML = `
                    <div class="guidance-result">
                        <div class="guidance-topic">Guidance for: ${topic}</div>
                        <div class="guidance-content">
                            ${guidance.content}
                        </div>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value">${guidance.difficulty}</div>
                                <div class="stat-label">Difficulty</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${guidance.importance}/10</div>
                                <div class="stat-label">Importance</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${guidance.estimatedTime}</div>
                                <div class="stat-label">Est. Study Time</div>
                            </div>
                        </div>
                    </div>
                `;
            }, 2000);
        }

        function generateAIGuidance(topic) {
            // This is a simplified version. In a real app, this would call an AI API
            const guidanceTemplates = {
                physics: {
                    content: `
                        <p><strong>Key Concepts to Master:</strong></p>
                        <ul>
                            <li>Understand fundamental definitions and formulas</li>
                            <li>Practice numerical problems regularly</li>
                            <li>Focus on conceptual understanding</li>
                            <li>Create formula sheets for quick revision</li>
                        </ul>
                        <p><strong>Recommended Study Plan:</strong></p>
                        <ol>
                            <li>Read theory from NCERT textbook</li>
                            <li>Solve example problems</li>
                            <li>Attempt practice questions</li>
                            <li>Take topic-wise tests</li>
                        </ol>
                    `,
                    difficulty: "Medium",
                    importance: "8",
                    estimatedTime: "2-3 weeks"
                },
                chemistry: {
                    content: `
                        <p><strong>Key Concepts to Master:</strong></p>
                        <ul>
                            <li>Memorize important reactions and mechanisms</li>
                            <li>Understand periodic table trends</li>
                            <li>Practice balancing chemical equations</li>
                            <li>Learn nomenclature rules</li>
                        </ul>
                        <p><strong>Recommended Study Plan:</strong></p>
                        <ol>
                            <li>Study theoretical concepts</li>
                            <li>Practice reaction mechanisms</li>
                            <li>Solve numerical problems</li>
                            <li>Revise with flashcards</li>
                        </ol>
                    `,
                    difficulty: "Medium-Hard",
                    importance: "9",
                    estimatedTime: "3-4 weeks"
                },
                mathematics: {
                    content: `
                        <p><strong>Key Concepts to Master:</strong></p>
                        <ul>
                            <li>Understand theorems and proofs</li>
                            <li>Practice different types of problems</li>
                            <li>Focus on problem-solving techniques</li>
                            <li>Learn shortcut methods</li>
                        </ul>
                        <p><strong>Recommended Study Plan:</strong></p>
                        <ol>
                            <li>Learn concepts and formulas</li>
                            <li>Solve basic problems</li>
                            <li>Attempt advanced problems</li>
                            <li>Take timed tests</li>
                        </ol>
                    `,
                    difficulty: "Hard",
                    importance: "10",
                    estimatedTime: "4-5 weeks"
                },
                biology: {
                    content: `
                        <p><strong>Key Concepts to Master:</strong></p>
                        <ul>
                            <li>Memorize biological terms and definitions</li>
                            <li>Understand processes and cycles</li>
                            <li>Learn classification systems</li>
                            <li>Practice diagram labeling</li>
                        </ul>
                        <p><strong>Recommended Study Plan:</strong></p>
                        <ol>
                            <li>Read and understand concepts</li>
                            <li>Create mind maps</li>
                            <li>Practice diagrams</li>
                            <li>Revise with MCQs</li>
                        </ol>
                    `,
                    difficulty: "Easy-Medium",
                    importance: "7",
                    estimatedTime: "2 weeks"
                }
            };
            
            // Determine subject from topic or use default
            let subject = 'physics';
            if (topic.toLowerCase().includes('chem')) subject = 'chemistry';
            if (topic.toLowerCase().includes('math')) subject = 'mathematics';
            if (topic.toLowerCase().includes('bio')) subject = 'biology';
            
            return guidanceTemplates[subject] || guidanceTemplates.physics;
        }

        // Admin functions
        function loadAdminData() {
            // Load questions and tests for admin management
            loadQuestionList();
            loadAdminTests();
        }

        function showQuestionManagement() {
            document.getElementById('questionManagement').classList.remove('hidden');
            document.getElementById('testManagement').classList.add('hidden');
        }

        function showTestManagement() {
            document.getElementById('questionManagement').classList.add('hidden');
            document.getElementById('testManagement').classList.remove('hidden');
        }

        function addQuestion() {
            const subject = document.getElementById('questionSubject').value;
            const classLevel = document.getElementById('questionClass').value;
            const chapter = document.getElementById('questionChapter').value;
            const difficulty = document.getElementById('questionDifficulty').value;
            const text = document.getElementById('questionText').value;
            const optionA = document.getElementById('optionA').value;
            const optionB = document.getElementById('optionB').value;
            const optionC = document.getElementById('optionC').value;
            const optionD = document.getElementById('optionD').value;
            const correctAnswer = document.getElementById('correctAnswer').value;
            const solution = document.getElementById('questionSolution').value;
            
            // Validate inputs
            if (!text || !optionA || !optionB || !optionC || !optionD || !solution) {
                alert('Please fill in all fields.');
                return;
            }
            
            // Initialize question bank structure if needed
            if (!questionBank[subject]) questionBank[subject] = {};
            if (!questionBank[subject][classLevel]) questionBank[subject][classLevel] = {};
            if (!questionBank[subject][classLevel][chapter]) questionBank[subject][classLevel][chapter] = {};
            if (!questionBank[subject][classLevel][chapter][difficulty]) {
                questionBank[subject][classLevel][chapter][difficulty] = [];
            }
            
            // Add question
            questionBank[subject][classLevel][chapter][difficulty].push({
                text,
                optionA,
                optionB,
                optionC,
                optionD,
                correctAnswer,
                solution
            });
            
            // Save to localStorage (in real app, this would be server-side)
            localStorage.setItem('questionBank', JSON.stringify(questionBank));
            
            // Clear form
            document.getElementById('questionText').value = '';
            document.getElementById('optionA').value = '';
            document.getElementById('optionB').value = '';
            document.getElementById('optionC').value = '';
            document.getElementById('optionD').value = '';
            document.getElementById('questionSolution').value = '';
            
            // Refresh question list
            loadQuestionList();
            
            alert('Question added successfully!');
        }

        function loadQuestionList() {
            const questionList = document.getElementById('questionList');
            questionList.innerHTML = '';
            
            let questionCount = 0;
            
            Object.keys(questionBank).forEach(subject => {
                Object.keys(questionBank[subject]).forEach(classLevel => {
                    Object.keys(questionBank[subject][classLevel]).forEach(chapter => {
                        Object.keys(questionBank[subject][classLevel][chapter]).forEach(difficulty => {
                            questionBank[subject][classLevel][chapter][difficulty].forEach((question, index) => {
                                questionCount++;
                                const questionItem = document.createElement('div');
                                questionItem.className = 'question-item';
                                questionItem.innerHTML = `
                                    <div class="question-text">
                                        <strong>${subject.toUpperCase()} - Class ${classLevel} - ${chapter}</strong><br>
                                        ${question.text}
                                    </div>
                                    <div class="question-difficulty difficulty-${difficulty}">${difficulty}</div>
                                    <button class="btn btn-secondary" onclick="deleteQuestion('${subject}', ${classLevel}, '${chapter}', '${difficulty}', ${index})" style="width: auto; padding: 0.5rem;">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                `;
                                questionList.appendChild(questionItem);
                            });
                        });
                    });
                });
            });
            
            if (questionCount === 0) {
                questionList.innerHTML = '<p>No questions in the database. Add some questions to get started.</p>';
            }
        }

        function deleteQuestion(subject, classLevel, chapter, difficulty, index) {
            if (confirm('Are you sure you want to delete this question?')) {
                questionBank[subject][classLevel][chapter][difficulty].splice(index, 1);
                localStorage.setItem('questionBank', JSON.stringify(questionBank));
                loadQuestionList();
            }
        }

        function loadAdminTests() {
            const tests = JSON.parse(localStorage.getItem('sampleTests')) || [];
            const adminTestsList = document.getElementById('adminTestsList');
            adminTestsList.innerHTML = '';
            
            tests.forEach(test => {
                const testItem = document.createElement('div');
                testItem.className = 'question-item';
                testItem.innerHTML = `
                    <div class="question-text">
                        <strong>${test.title}</strong><br>
                        Subject: ${test.subject} | Class: ${test.class} | Chapter: ${test.chapter}
                    </div>
                    <div class="question-difficulty difficulty-${test.difficulty}">${test.difficulty}</div>
                    <button class="btn btn-secondary" onclick="deleteTest(${test.id})" style="width: auto; padding: 0.5rem;">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                adminTestsList.appendChild(testItem);
            });
        }

        function deleteTest(testId) {
            if (confirm('Are you sure you want to delete this test?')) {
                let tests = JSON.parse(localStorage.getItem('sampleTests')) || [];
                tests = tests.filter(test => test.id !== testId);
                localStorage.setItem('sampleTests', JSON.stringify(tests));
                loadAdminTests();
            }
        }

        function loadUserData() {
            // Load any additional user-specific data
            loadTests();
        }

        // Initialize the application when the page loads
        window.onload = init;
    </script>
</body>
</html>